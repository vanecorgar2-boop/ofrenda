<!DOCTYPE html>
<html lang="es">
<head>
    <title>Pan de Muerto</title>
    <style>
        body { margin: 0; }
        canvas { display: block; }
    </style>
</head>
<body>
    
<canvas id="myCanvas">
</canvas>

<script type="importmap">
    {
        "imports": {
            "three": "./js/three.module.js",
            "three/OrbitControls": "./js/OrbitControls.js"
        }
    }
</script>

<script type="module">
    //üóÉÔ∏èüóÉÔ∏è Mandar llamar a las librer√≠as
    import * as THREE from 'three';
    import { OrbitControls } from 'three/OrbitControls';

    //üïπÔ∏èüïπÔ∏è Renderer 
    var renderer = new THREE.WebGLRenderer({
        canvas: document.getElementById('myCanvas'),
        antialias: true,
    });
    renderer.setPixelRatio(window.devicePixelRatio);
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColor(0x1a1a1a); 
    var scene = new THREE.Scene();

    //üé•üé•
    var camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 2000);
    scene.add(camera);


    camera.position.set(0, 7, 10); 

   
    var controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;

    var axesHelper = new THREE.AxesHelper(5);
   

    //üí°üí° LUCES
    var ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
    scene.add(ambientLight);
    var directionalLight = new THREE.DirectionalLight(0xffffff, 0.9);
    directionalLight.position.set(10, 15, 5);
    scene.add(directionalLight);


    //  PAN DE MUERTO 

    var materialPan = new THREE.MeshLambertMaterial({ color: 0xD2B48C, side: THREE.DoubleSide });

    // Base del pan (esfera aplastada)
    var geometriaBase = new THREE.SphereGeometry(3, 32, 32);
    var meshBase = new THREE.Mesh(geometriaBase, materialPan);
    meshBase.scale.y = 0.6; 


    // hueso
    var geometriaCuerpoHueso = new THREE.CylinderGeometry(0.3, 0.3, 3, 32);
    var geometriaNudillo = new THREE.SphereGeometry(0.5, 32, 32);

    // molde hueso
    var huesoMolde = new THREE.Group();
    var cuerpo = new THREE.Mesh(geometriaCuerpoHueso, materialPan);
    var nudillo1 = new THREE.Mesh(geometriaNudillo, materialPan);
    var nudillo2 = new THREE.Mesh(geometriaNudillo, materialPan);
    
    nudillo1.position.y = 1.5; 
    nudillo2.position.y = -1.5;
    
    huesoMolde.add(cuerpo, nudillo1, nudillo2);

    // Huesitos 
    var grupoHuesos = new THREE.Group();

    // Hueso 1 
    var hueso1 = huesoMolde.clone();
    hueso1.rotation.x =1.5708; 
    hueso1.rotation.z = 0.3; 
    hueso1.position.z = 1.5;

    // Hueso 2
    var hueso2 = huesoMolde.clone();
    hueso2.rotation.x = 1.5708;
    hueso2.rotation.z = -0.3; 
    hueso2.position.z = -1.5;

    // Hueso 3 
    var hueso3 = huesoMolde.clone();
    hueso3.rotation.z = 1.5708;
    hueso3.rotation.x = -0.3;
    hueso3.position.x = 1.5;

    // Hueso 4 
    var hueso4 = huesoMolde.clone();
    hueso4.rotation.z = 1.5708;
    hueso4.rotation.x = 0.3; 
    hueso4.position.x = -1.5;

    grupoHuesos.add(hueso1, hueso2, hueso3, hueso4);
    grupoHuesos.position.y = 1.3; 

    // 3. Cr√°neo 
    var geometriaCranio = new THREE.SphereGeometry(0.8, 32, 32);
    var meshCranio = new THREE.Mesh(geometriaCranio, materialPan);
    meshCranio.position.y = 1.6;

 
    // 4. Plato 
var materialPlato = new THREE.MeshLambertMaterial({ color: 0xFFFFFF, side: THREE.DoubleSide });
var geometriaPlato = new THREE.CylinderGeometry(4, 4, 0.3, 32);
var plato = new THREE.Mesh(geometriaPlato, materialPlato);
plato.position.y = -1.8;

    //  unir todas las piezas del pan
    var panDeMuerto = new THREE.Group();
    panDeMuerto.add(plato);
    panDeMuerto.add(meshBase);
    panDeMuerto.add(grupoHuesos);
    panDeMuerto.add(meshCranio);
    scene.add(panDeMuerto);
    panDeMuerto.position.y = 1.8; 


    //üé∞üé∞Rendering y animaci√≥n
    requestAnimationFrame(render);
    function render() {

        //Animaci√≥n
        panDeMuerto.rotation.y += 0.005;
        controls.update();
        renderer.render(scene, camera);
        requestAnimationFrame(render);
    }
</script>
</body>
</html>

